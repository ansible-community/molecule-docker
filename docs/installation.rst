.. _installation:

************
Installation
************

This document assumes the developer has a basic understanding of python
packaging, and how to install and manage python on the system executing
Molecule.

Pip
===

:std:doc:`pip <pip:getting-started>` is the only supported installation method.

  .. code-block:: bash

      $ python3 -m pip install molecule-docker

.. warning::

  It is highly recommended that you install molecule docker in a :std:doc:`virtual
  environment <virtualenv:user_guide>`. This will provide a modern copy of
  `setuptools`_ which is mandatory in order for molecule docker to be installed
  successfully and function correctly. If you cannot use a virtual environment
  then you can attempt a package upgrade with the following:

  .. code-block:: bash

      $ python3 -m pip install --upgrade --user setuptools

  .. _setuptools: https://pypi.org/project/setuptools/

.. warning::

  Pip v19 series has an :gh:`isolation bug <pypa/pip/issues/6264>` of
  setuptools being exposed to the package build env. That is why it's
  highly recommended to upgrade user setuptools even when using a proper
  virtualenv as shown above.

Requirements
------------

Depending on the driver chosen, you may need to install additional python
packages.  See the driver's documentation or ``INSTALL.rst``, which is created
when initializing a new scenario.

Install
-------

Install Molecule Docker:

.. code-block:: bash

    $ python3 -m pip install --user "molecule-docker"

Molecule uses the "delegated" driver by default. Other drivers can
be installed separately from PyPI, such as the molecule-docker driver.
If you would like to use docker as the molecule driver, the installation
command would look like this:

.. code-block:: bash

    $ python3 -m pip install --user "molecule[docker]"

Source
======

Due to the rapid pace of development on this tool, you might want to
install and update a bleeding-edge version of Molecule from Git.

Follow the instructions below to do the initial install and subsequent
updates.

The package distribution that you'll get installed will be autogenerated
and will contain a commit hash information making it easier to refer to
certain unstable version should the need to send a bug report arise.

.. warning::

  Please avoid using ``--editable``/``-e`` `development mode`_ when
  installing Molecule with Pip. This not very well supported and only
  needed when doing development.

  .. _`development mode`:
     https://setuptools.readthedocs.io/en/latest\
     /setuptools.html#development-mode

Requirements
------------

CentOS 8
^^^^^^^^

.. code-block:: bash

    $ sudo dnf install -y libffi-devel git

Ubuntu 16.x
^^^^^^^^^^^

.. code-block:: bash

    $ sudo apt install -y libffi-dev git

Install
-------

.. code-block:: bash

    $ python3 -m pip install -U git+https://github.com/ansible-community/molecule-docker
